{"version":3,"sources":["../../../node_modules/browser-pack/_prelude.js","GoogleMap.ts","app3.ts"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Gmap","prototype","showDefaultmap","targetLat","targeLng","defaultAjax","__awaiter","_this","Promise","resolve","reject","result","$","ajax","type","url","dataType","console","log","error","then","mapDiv","document","getElementById","google","maps","Map","center","lat","lng","zoom","map","_a","sent","marker","Marker","position","LatLng","animation","Animation","BOUNCE","clearMaker","setVisible","exec","gmap","check","data","key","address","language","executeAjax","status","components","results","address_components","element","index","types","long_name","target","val","num","address2","address3","componentsG","geometry","location","GoogleMap_1","click"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export let marker\n\nexport class Gmap {\n\n    async showDefaultmap(targetLat, targeLng) {\n\n        let defaultAjax = async () => {\n            try {\n\n                return new Promise(\n                    ( resolve:(result:Array<json>) => void , reject) => {\n\n                        let result = $.ajax({type: 'GET'\n                            , url: 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAowrENSzn3hYH_gxBPP9cZ7Kmia80FUSg'\n                            , dataType: 'jsonp'})\n\n                        console.log('asyncとawaitで非同期処理を実装中')\n                        resolve(result)\n\n                    })\n\n            } catch (error) {\n                console.error(error)\n            }\n        }\n\n        // awaitで待つ関数は、必ずPromiseオブジェクトを生成して返す\n        let map = await defaultAjax().then( () => {\n            let mapDiv : HTMLElement = document.getElementById( 'map' )\n            return new google.maps.Map(mapDiv, { center: { lat: targetLat, lng: targeLng}, zoom: 15})\n        })\n\n        marker = new google.maps.Marker( {map: map\n            , position: new google.maps.LatLng( targetLat, targeLng )\n            , animation: google.maps.Animation.BOUNCE} )\n\n    }\n\n    async clearMaker() {\n        // marker.setMap(null) // 削除\n        marker.setVisible(false)\n    }\n}\n","import { Gmap } from \"./GoogleMap\"\n\nasync function executeAjax(type : number, check: (type: number) => string) {\n        return new Promise(\n            ( resolve:(result:Array<json>) => void , reject) => {\n\n                let result = $.ajax({type: 'GET'\n                    , url: 'https://maps.googleapis.com/maps/api/geocode/json'\n                    , dataType: 'json'\n                    , data: {\n                        key: 'AIzaSyD0siOfCTEbyufa3SGEp55uH8GrMj8L99s',\n                        address: check(type),\n                        language: 'ja'}\n                    })\n\n                console.log('asyncとawaitで非同期処理を実装中')\n                console.log(result)\n\n                resolve(result)\n            })\n}\n\n\nlet check:(type:number) => string = (type: number) => {\n\n    switch (type) {\n\n        case 1:\n            return $('#zip').val()\n            break\n\n        case 2:\n            return $('#searchWord').val()\n            break\n    }\n}\n\nasync function exec(type , gmap:Gmap) {\n\n    // awaitで待つ関数は、必ずPromiseオブジェクトを生成して返す\n    await executeAjax(type, check).then( function(data) {\n\n        if (data.status != \"OK\") throw new Error(data.status)\n\n        let components = data.results[0].address_components\n\n        components.map(function(element, index) {\n            console.log(`【${index}】${element.types[0]}::${element.long_name}`)\n        })\n\n        let target : number = components.length\n        // if(type == 1){\n        //\n        //     // 住所自動入力\n        //     $('#searchWord').val('')\n        //     // $('#state').val(components[target - 2 ].long_name)\n        //     // $('#city').val(components[target - 3 ].long_name)\n        //     // $('#address1').val(components[target - 4 ].long_name)\n        //     //\n        //     // let address2 = (components.length == 5) ? '' : components[target - 5].long_name\n        //     // let address3 = (components.length < 6) ? '' : `ー${components[target - 6].long_name}`\n        //     // $('#address2').val(address2 + address3)\n        //\n        // } else if(type == 2) {\n        //\n        //     // 住所自動入力\n        //     $('#zip').val(components[target - 1 ].long_name)\n        //     // $('#state').val(components[target - 3 ].long_name)\n        //     // $('#city').val(components[target - 4 ].long_name)\n        //     // $('#address1').val(components[target - 5 ].long_name)\n        //     //\n        //     // let address2 = (components.length < 6) ? '' : components[target - 6].long_name\n        //     // let address3 = (components.length < 7) ? '' : `ー${components[target - 7].long_name}`\n        //     // $('#address2').val(address2 + address3)\n        // }\n\n\n\n        // 住所自動入力\n        if(type == 1) {\n            $('#searchWord').val('')\n            $('#zip').val(components[0].long_name)\n        }\n\n        if(type == 2) $('#zip').val(components[target - 1 ].long_name)\n\n        let num =(type == 1) ? 2 : 3\n        $('#state').val(components[target - num ].long_name)\n        $('#city').val(components[target - (num + 1) ].long_name)\n        $('#address1').val(components[target - (num + 2) ].long_name)\n\n        let address2 = (components.length == 5) ? '' : (components.length < (num + 3)) ? '':  components[target - (num + 3)].long_name\n        let address3 = (components.length == 6) ? '' : (components.length < (num + 4)) ? '': `ー${components[target - (num + 4)].long_name}`\n        $('#address2').val(address2 + address3)\n\n        // 地図の更新\n        var componentsG = data.results[0].geometry\n        let targetLat : number =componentsG.location.lat\n        let targeLng : number =componentsG.location.lng\n        gmap.showDefaultmap(targetLat, targeLng)\n\n    }).catch(\n        error => {\n            console.log('errorが発生しました')\n            console.log(error)}\n    )\n\n}\n\n$(() => {\n\n    let gmap = new Gmap()\n    gmap.showDefaultmap(35.71, 139.8107)\n\n    $('#btn').click((e) =>  {\n\n        console.log(`郵便番号::${$('#zip').val()}`)\n        console.log('asyncとawaitで非同期処理を実装')\n        exec(1, gmap)\n        console.log('asyncとawaitで非同期処理を実装完了')\n    })\n\n    $('#searchWordbtn').click((e) =>  {\n\n        console.log(`検索ワード::${$('#searchWord').val()}`)\n        console.log('asyncとawaitで非同期処理を実装')\n        exec(2, gmap)\n        console.log('asyncとawaitで非同期処理を実装完了')\n    })\n\n    // clear\n    $('#btn2').click((e) =>  {\n        console.log('asyncとawaitで非同期処理を実装_clear')\n        gmap.clearMaker()\n        console.log('asyncとawaitで非同期処理を実装完了_clear')\n    })\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}